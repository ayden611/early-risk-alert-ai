<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Early Risk Alert AI</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="shell">
    <header class="header">
      <div class="logo">ERA</div>
      <div>
        <div class="title">Early Risk Alert AI</div>
        <div class="subtitle">Preventive risk insight based on measurable inputs.</div>
      </div>
      <div class="spacer"></div>
      <div class="pill">Demo ML App</div>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Enter your health indicators</h2>
        <p class="muted">This tool estimates risk for awareness only (not medical advice).</p>

        <form method="POST" action="/" id="riskForm" class="form">
          <div class="row">
            <label>Age
              <input type="number" step="0.1" name="age" min="1" max="120" required value="{{ form_vals.age }}">
            </label>

            <label>BMI
              <input type="number" step="0.1" name="bmi" min="10" max="80" required value="{{ form_vals.bmi }}">
            </label>
          </div>

          <label>Exercise Level
            <select name="exercise" required>
              <option value="" {% if form_vals.exercise == "" %}selected{% endif %}>Select...</option>
              <option value="0" {% if form_vals.exercise == 0 %}selected{% endif %}>0 - Low</option>
              <option value="1" {% if form_vals.exercise == 1 %}selected{% endif %}>1 - Medium</option>
              <option value="2" {% if form_vals.exercise == 2 %}selected{% endif %}>2 - High</option>
            </select>
            <div class="hint">Tip: If unsure, choose “Low”.</div>
          </label>

          <div class="row">
            <label>Systolic BP (top number)
              <input type="number" step="0.1" name="sys_bp" min="60" max="260" required value="{{ form_vals.sys_bp }}">
            </label>

            <label>Diastolic BP (bottom number)
              <input type="number" step="0.1" name="dia_bp" min="40" max="200" required value="{{ form_vals.dia_bp }}">
            </label>
          </div>

          <label>Heart Rate (bpm)
            <input type="number" step="0.1" name="heart_rate" min="30" max="220" required value="{{ form_vals.heart_rate }}">
          </label>

          <label class="check">
            <input type="checkbox" required />
            <span>I understand this tool provides a risk estimate for awareness only and is not medical advice. Do not enter personal identifiers.</span>
          </label>

          <div class="actions">
            <button class="btn primary" type="submit">Predict</button>
            <button class="btn" type="button" id="clearBtn">Clear</button>
          </div>

          <a class="link" href="/history">View recent predictions</a>
        </form>
      </section>

      <section class="card">
        <h2>Result</h2>

        {% if prediction %}
          <div class="result-card {{ 'high' if risk_class == 'high' else 'low' }}">
            <div class="result-title">
              {{ "High Risk" if risk_class == "high" else "Low Risk" }}
            </div>

            <div class="confidence">
              Confidence: <b>{{ probability }}%</b>
            </div>

            <div class="meter">
              <div class="meter-fill" style="width: {{ probability }}%"></div>
            </div>

            <div class="meter-caption">
              High Risk Probability: <span class="meter-number">{{ probability }}%</span>
            </div>

            <div class="disclaimer">
              Important: This is an estimated risk score based on the inputs provided.
              This tool is for awareness only and is not medical advice.
              If you experience symptoms or consistently high blood pressure, consult a licensed healthcare professional.
            </div>
          </div>
        {% else %}
          <p class="muted">Submit the form to see your risk prediction and confidence score.</p>
        {% endif %}

        <div class="footnote">
          <span class="dot"></span> Model runs on your deployed Flask app + trained model file.
        </div>
      </section>
    </main>
  </div>

  <script>
    document.getElementById("clearBtn").addEventListener("click", () => {
      const form = document.getElementById("riskForm");
      form.reset();
      form.querySelector("input, select").focus();
    });
  </script>
</body>
</html>
