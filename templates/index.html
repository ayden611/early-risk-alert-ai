{% extends "base.html" %}
{% block title %}Predict | Early Risk Alert AI{% endblock %}

{% block content %}
<section class="card">
  <h1>Predict Risk</h1>
  <p class="muted">
    Use either mode:
    <strong>Server Submit</strong> (renders result) or
    <strong>Instant (JS)</strong> (calls API, no reload).
  </p>

  <div class="mode-row">
    <button type="button" class="btn" id="btnServer">Server Submit</button>
    <button type="button" class="btn" id="btnInstant">Instant (JS)</button>
  </div>

  <form id="riskForm" method="POST" action="{{ url_for('home') }}">
    <div class="grid">
      <label>Age
        <input name="age" type="number" step="any" required />
      </label>

      <label>BMI
        <input name="bmi" type="number" step="any" required />
      </label>

      <label>Exercise Level (Low / Moderate / High)
        <select name="exercise_level" required>
          <option value="Low">Low</option>
          <option value="Moderate">Moderate</option>
          <option value="High">High</option>
        </select>
      </label>

      <label>Systolic BP
        <input name="systolic_bp" type="number" step="any" required />
      </label>

      <label>Diastolic BP
        <input name="diastolic_bp" type="number" step="any" required />
      </label>

      <label>Heart Rate
        <input name="heart_rate" type="number" step="any" required />
      </label>
    </div>

    <button class="btn primary" type="submit" id="submitBtn">Run Prediction</button>
  </form>
</section>

<section class="card" id="resultCard">
  <h2>Result</h2>
  <div class="result">
    <div><span class="muted">Risk:</span> <strong id="riskLabel">
      {% if result %}{{ result }}{% else %}—{% endif %}
    </strong></div>
    <div><span class="muted">Probability:</span> <strong id="riskProb">
      {% if probability is not none %}
  {{ probability | round(2) }}%
{% else %}
  —
{% endif %}
    </strong></div>
  </div>
  <p class="muted small" id="resultNote">
    {% if result %}
      Rendered by server route (/predict).
    {% else %}
      Choose a mode above.
    {% endif %}
  </p>
</section>
{% endblock %}
