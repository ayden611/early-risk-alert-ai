{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h1>Run Prediction</h1>

    <form method="POST" class="form">
      <label>Age
        <input name="age" type="number" step="1" min="1" required>
      </label>

      <label>BMI
        <input name="bmi" type="number" step="0.1" min="1" required>
      </label>

      <label>Exercise Level
        <select name="exercise_level" required>
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
      </label>

      <label>Systolic BP
        <input name="systolic_bp" type="number" step="1" min="50" required>
      </label>

      <label>Diastolic BP
        <input name="diastolic_bp" type="number" step="1" min="30" required>
      </label>

      <label>Heart Rate
        <input name="heart_rate" type="number" step="1" min="30" required>
      </label>

      <button class="btn" type="submit">Run Prediction</button>
    </form>

    {% if prediction %}
      <div class="result">
        <div class="pill {{ 'bad' if prediction=='High Risk' else 'good' }}">
          {{ prediction }}
        </div>
        <div class="muted">Probability (High Risk): <b>{{ probability }}%</b></div>
        {% if current_user.is_authenticated %}
          <div class="muted"><a href="{{ url_for('history') }}">View History</a></div>
        {% else %}
          <div class="muted"><a href="{{ url_for('login') }}">Login to view history</a></div>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <div class="card">
    <h2>API</h2>
    <p class="muted">
      POST <code>/api/predict</code> with JSON body:
    </p>
    <pre class="code">{
  "age": 50,
  "bmi": 25.0,
  "exercise_level": "Low",
  "systolic_bp": 120,
  "diastolic_bp": 80,
  "heart_rate": 70
}</pre>
  </div>
{% endblock %}
