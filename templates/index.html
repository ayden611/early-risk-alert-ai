<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Early Risk Alert AI</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="page">
    <header class="topbar">
      <div class="brand">
        <div class="logo">ERA</div>
        <div>
          <div class="title">Early Risk Alert AI</div>
          <div class="subtitle">Preventive risk insight based on measurable inputs.</div>
        </div>
      </div>
      <div class="badge">Demo ML App</div>
    </header>

    <main class="grid">
      <!-- FORM CARD -->
      <section class="card">
        <h2 class="card-title">Enter your health indicators</h2>
        <p class="card-hint">This tool estimates risk for awareness only (not medical advice).</p>

        <form method="POST" class="form" id="riskForm">
          <div class="row">
            <div class="field">
              <label>Age</label>
              <input type="number" name="age" min="1" max="120" step="1" required
                     value="{{ form_vals.age if form_vals is defined else '' }}"
                     placeholder="e.g., 42" />
            </div>

            <div class="field">
              <label>BMI</label>
              <input type="number" name="bmi" min="10" max="80" step="0.1" required
                     value="{{ form_vals.bmi if form_vals is defined else '' }}"
                     placeholder="e.g., 27.5" />
            </div>
          </div>

          <div class="field">
            <label>Exercise Level</label>
            <select name="exercise" required>
              {% set ex = form_vals.exercise if form_vals is defined else '' %}
              <option value="" {% if ex == '' %}selected{% endif %}>Select…</option>
              <option value="0" {% if ex == '0' %}selected{% endif %}>0 — Low</option>
              <option value="1" {% if ex == '1' %}selected{% endif %}>1 — Medium</option>
              <option value="2" {% if ex == '2' %}selected{% endif %}>2 — High</option>
            </select>
            <small class="help">Tip: If unsure, choose “Low”.</small>
          </div>

          <div class="row">
            <div class="field">
              <label>Systolic BP (top number)</label>
              <input type="number" name="sys_bp" min="60" max="260" step="1" required
                     value="{{ form_vals.sys_bp if form_vals is defined else '' }}"
                     placeholder="e.g., 120" />
            </div>

            <div class="field">
              <label>Diastolic BP (bottom number)</label>
              <input type="number" name="dia_bp" min="30" max="160" step="1" required
                     value="{{ form_vals.dia_bp if form_vals is defined else '' }}"
                     placeholder="e.g., 80" />
            </div>
          </div>

          <div class="field">
            <label>Heart Rate (bpm)</label>
            <input type="number" name="heart_rate" min="30" max="220" step="1" required
                   value="{{ form_vals.heart_rate if form_vals is defined else '' }}"
                   placeholder="e.g., 72" />
          </div>

          <label class="check">
            <input type="checkbox" required />
            <span>I understand this tool provides a risk estimate for awareness only and is not medical advice. Do not enter personal identifiers.</span>
          </label>

          <div class="actions">
            <button type="submit" class="btn primary">Predict</button>
            <button type="button" class="btn ghost" id="clearBtn">Clear</button>
          </div>
        </form>
      </section>

      <!-- RESULT CARD -->
      <section class="card">
        <h2 class="card-title">Result</h2>

        {% if prediction %}
          {% set risk_class = 'high' if prediction == 'High Risk' else 'low' %}
          {% if prediction not in ['High Risk','Low Risk'] %}
            {% set risk_class = 'moderate' %}
          {% endif %}

          <div class="result-card {{ risk_class }}">
            <div class="result-head">
              <div>
                <div class="result-title">{{ prediction }}</div>
                <div class="result-sub">
                  Confidence: <strong>{{ probability }}%</strong>
                </div>
              </div>
              <div class="pill {{ risk_class }}">{{ risk_class|title }}</div>
            </div>

            <div class="meter">
              <div class="meter-fill" style="width: {{ probability }}%"></div>
            </div>
            <div class="meter-caption">
              High Risk Probability: <span class="meter-number">{{ probability }}%</span>
            </div>

            <div class="disclaimer">
              Important: This is an estimated risk score based on the inputs provided. This tool is for awareness only and is not medical advice.
              If you experience symptoms or consistently high blood pressure, consult a licensed healthcare professional.
            </div>
          </div>
        {% else %}
          <div class="empty">
            Submit the form to see your risk prediction and confidence score.
          </div>
        {% endif %}
        <a href="/history" style="display:inline-block;margin-top:12px;opacity:.9;">View recent predictions</a>

        <div class="footer-note">
          <span class="dot"></span> Model runs on your deployed Flask app + trained model file.
        </div>
      </section>
    </main>
  </div>

  <script>
    // Clears the form inputs without reloading the page
    document.getElementById("clearBtn").addEventListener("click", () => {
      const form = document.getElementById("riskForm");
      form.reset();
      // Optional: scroll to top of form
      form.querySelector("input, select").focus();
    });
  </script>
</body>
</html>


